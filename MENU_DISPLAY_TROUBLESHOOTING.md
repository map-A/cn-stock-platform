# ä¾§è¾¹æ èœå•æ˜¾ç¤ºé—®é¢˜æ’æŸ¥æŒ‡å—

## é—®é¢˜ç°è±¡

è®¾ç½®èœå•çš„å­é¡¹æ˜¾ç¤ºä¸º `settings.system` å’Œ `settings.user`ï¼Œè€Œä¸æ˜¯å¯¹åº”çš„ä¸­æ–‡ç¿»è¯‘ `ç³»ç»Ÿè®¾ç½®` å’Œ `ä¸ªäººè®¾ç½®`ã€‚

## åŸå› åˆ†æ

UmiJS é€šè¿‡ä»¥ä¸‹æµç¨‹æ¥æ˜¾ç¤ºèœå•æ ‡ç­¾ï¼š

1. **è¯»å–è·¯ç”±é…ç½®**: è·å– `name` å­—æ®µçš„å€¼
2. **æŸ¥æ‰¾ç¿»è¯‘**: åœ¨å›½é™…åŒ–æ–‡ä»¶ä¸­æŸ¥æ‰¾ `menu.{name}` é”®
3. **æ˜¾ç¤ºæ ‡ç­¾**: æ˜¾ç¤ºå¯¹åº”çš„ç¿»è¯‘å†…å®¹

å¦‚æœèœå•æ˜¾ç¤ºçš„æ˜¯ `settings.system`ï¼ˆè‹±æ–‡åŸæ–‡ï¼‰ï¼Œè¯´æ˜ï¼š
- âŒ ç¿»è¯‘æ–‡ä»¶ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„é”®
- âŒ æˆ–è€…ç¿»è¯‘æ–‡ä»¶æ²¡æœ‰è¢«æ­£ç¡®åŠ è½½

## å®Œæ•´æ’æŸ¥æ¸…å•

### 1ï¸âƒ£ æ£€æŸ¥èœå•ç¿»è¯‘æ˜¯å¦å­˜åœ¨

âœ… **ä¸­æ–‡èœå•** (src/locales/zh-CN/menu.ts)
```typescript
'menu.settings': 'è®¾ç½®',
'menu.settings.system': 'ç³»ç»Ÿè®¾ç½®',  // â† å¿…é¡»æœ‰è¿™ä¸€è¡Œ
'menu.settings.user': 'ä¸ªäººè®¾ç½®',    // â† å¿…é¡»æœ‰è¿™ä¸€è¡Œ
```

âœ… **è‹±æ–‡èœå•** (src/locales/en-US/menu.ts)
```typescript
'menu.settings': 'Settings',
'menu.settings.system': 'System Settings',  // â† å¿…é¡»æœ‰è¿™ä¸€è¡Œ
'menu.settings.user': 'Personal Settings',  // â† å¿…é¡»æœ‰è¿™ä¸€è¡Œ
```

### 2ï¸âƒ£ æ£€æŸ¥è·¯ç”±é…ç½®

âœ… **è·¯ç”±** (config/routes.ts)
```typescript
{
  path: '/settings',
  name: 'settings',
  icon: 'SettingOutlined',
  routes: [
    { path: '/settings/system', component: './SystemSettings', name: 'settings.system' },
    { path: '/settings/user', component: './UserSettings', name: 'settings.user' },
  ],
}
```

### 3ï¸âƒ£ æ£€æŸ¥ç¿»è¯‘æ–‡ä»¶æ˜¯å¦è¢«å¼•å…¥

âœ… **ä¸­æ–‡ä¸»å…¥å£** (src/locales/zh-CN.ts)
```typescript
import menu from './zh-CN/menu';

export default {
  ...menu,  // â† å¿…é¡»æœ‰è¿™ä¸€è¡Œæ¥åˆå¹¶èœå•ç¿»è¯‘
};
```

âœ… **è‹±æ–‡ä¸»å…¥å£** (src/locales/en-US.ts)
```typescript
import menu from './en-US/menu';

export default {
  ...menu,  // â† å¿…é¡»æœ‰è¿™ä¸€è¡Œæ¥åˆå¹¶èœå•ç¿»è¯‘
};
```

## å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: èœå•æ˜¾ç¤ºè‹±æ–‡è€Œä¸æ˜¯ä¸­æ–‡

**ç—‡çŠ¶**: ä¾§è¾¹æ æ˜¾ç¤º `settings.system` è€Œä¸æ˜¯ `ç³»ç»Ÿè®¾ç½®`

**åŸå› **: æ‰¾ä¸åˆ°å¯¹åº”çš„ç¿»è¯‘é”®

**è§£å†³æ–¹æ¡ˆ**:

1. ç¡®è®¤èœå•ç¿»è¯‘æ–‡ä»¶ä¸­æœ‰å®Œæ•´çš„é”®å€¼å¯¹
2. æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜
3. é‡æ–°å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# æ¸…ç©ºç¼“å­˜å¹¶é‡å¯
rm -rf node_modules/.cache
npm run dev
```

4. å¦‚æœä»æœªè§£å†³ï¼Œå°è¯•å®Œæ•´é‡å»ºï¼š

```bash
npm run build
```

### é—®é¢˜ 2: åˆ‡æ¢è¯­è¨€åèœå•ä»æ˜¾ç¤ºè‹±æ–‡

**ç—‡çŠ¶**: ä¸­è‹±æ–‡åˆ‡æ¢åï¼Œèœå•ä»æ˜¾ç¤ºç›¸åŒçš„å†…å®¹

**åŸå› **: å›½é™…åŒ–ç³»ç»Ÿæœªæ­£ç¡®åˆ·æ–°

**è§£å†³æ–¹æ¡ˆ**:

1. æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ Console æ˜¯å¦æœ‰é”™è¯¯
2. åˆ·æ–°é¡µé¢
3. æ£€æŸ¥ localStorage ä¸­çš„è¯­è¨€è®¾ç½®

```javascript
// åœ¨æµè§ˆå™¨ Console ä¸­æ£€æŸ¥
localStorage.getItem('umi_locale')  // åº”è¯¥è¿”å› 'zh-CN' æˆ– 'en-US'
```

### é—®é¢˜ 3: æ–°å¢èœå•åæ˜¾ç¤ºä¸æ­£å¸¸

**ç—‡çŠ¶**: æ–°å¢çš„å­èœå•é¡¹æ— æ³•æ­£ç¡®æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**:

ç¡®ä¿æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ·»åŠ æ–°èœå•ï¼š

1. **åœ¨ config/routes.ts ä¸­æ·»åŠ è·¯ç”±**
```typescript
{ path: '/settings/xxx', component: './XXX', name: 'settings.xxx' }
```

2. **åœ¨ src/locales/zh-CN/menu.ts ä¸­æ·»åŠ ä¸­æ–‡ç¿»è¯‘**
```typescript
'menu.settings.xxx': 'ä¸­æ–‡æ ‡ç­¾',
```

3. **åœ¨ src/locales/en-US/menu.ts ä¸­æ·»åŠ è‹±æ–‡ç¿»è¯‘**
```typescript
'menu.settings.xxx': 'English Label',
```

4. **é‡å¯å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

## éªŒè¯æ­¥éª¤

### æ­¥éª¤ 1: å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® http://localhost:8000

### æ­¥éª¤ 2: æ£€æŸ¥ä¾§è¾¹æ 

âœ… è®¾ç½®èœå•åº”æ˜¾ç¤ºä¸ºï¼š
- **ä¸­æ–‡**: âš™ï¸ è®¾ç½®
  - ğŸ”§ ç³»ç»Ÿè®¾ç½®
  - ğŸ‘¤ ä¸ªäººè®¾ç½®

- **è‹±æ–‡**: âš™ï¸ Settings
  - ğŸ”§ System Settings
  - ğŸ‘¤ Personal Settings

### æ­¥éª¤ 3: æµ‹è¯•è¯­è¨€åˆ‡æ¢

1. ç‚¹å‡»å³ä¸Šè§’çš„è¯­è¨€é€‰æ‹©å™¨
2. åˆ‡æ¢åˆ°è‹±æ–‡
3. ä¾§è¾¹æ èœå•åº”è¯¥ç«‹å³æ›´æ–°ä¸ºè‹±æ–‡
4. å†æ¬¡åˆ‡æ¢å›ä¸­æ–‡
5. ä¾§è¾¹æ èœå•åº”è¯¥æ˜¾ç¤ºä¸­æ–‡

## è°ƒè¯•æŠ€å·§

### åœ¨æµè§ˆå™¨ Console ä¸­æ£€æŸ¥ç¿»è¯‘

```javascript
// æ£€æŸ¥æ˜¯å¦èƒ½è·å–ç¿»è¯‘
const intl = window.g_intl;
console.log(intl.formatMessage({ id: 'menu.settings.system' }));
// åº”è¯¥è¾“å‡º: "ç³»ç»Ÿè®¾ç½®"
```

### æ£€æŸ¥è·¯ç”±é…ç½®

```javascript
// åœ¨é¡µé¢ä¸­æ£€æŸ¥è·¯ç”±æ˜¯å¦æ­£ç¡®
console.log(window.g_routes);
```

## å¦‚æœé—®é¢˜ä»æœªè§£å†³

è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. **æ¸…ç©ºæ‰€æœ‰ç¼“å­˜**
```bash
rm -rf dist node_modules/.cache .umi
npm install
npm run build
npm run dev
```

2. **æ£€æŸ¥æ˜¯å¦æœ‰æ‹¼å†™é”™è¯¯**
   - ç¡®ä¿ `menu.settings.system` åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­æ‹¼å†™ä¸€è‡´
   - ä¸è¦æ¼æ‰ä»»ä½•å­—ç¬¦

3. **é‡å¯æµè§ˆå™¨**
   - å…³é—­æ‰€æœ‰æµè§ˆå™¨æ ‡ç­¾é¡µ
   - æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜
   - é‡æ–°æ‰“å¼€åº”ç”¨

4. **æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°**
   - æ‰“å¼€ F12 å¼€å‘è€…å·¥å…·
   - æŸ¥çœ‹ Console æ ‡ç­¾ä¸­æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
   - æŸ¥çœ‹ Network æ ‡ç­¾ç¡®ä¿æ‰€æœ‰èµ„æºéƒ½åŠ è½½æˆåŠŸ

## æˆåŠŸéªŒè¯

âœ… å¦‚æœä»¥ä¸‹æ¡ä»¶éƒ½æ»¡è¶³ï¼Œè¯´æ˜èœå•é…ç½®æ­£ç¡®ï¼š

- [ ] ä¸­æ–‡æ¨¡å¼ä¸‹æ˜¾ç¤ºä¸­æ–‡èœå•æ ‡ç­¾
- [ ] è‹±æ–‡æ¨¡å¼ä¸‹æ˜¾ç¤ºè‹±æ–‡èœå•æ ‡ç­¾
- [ ] åˆ‡æ¢è¯­è¨€åèœå•ç«‹å³æ›´æ–°
- [ ] æ²¡æœ‰åœ¨ Console ä¸­çœ‹åˆ°é”™è¯¯ä¿¡æ¯
- [ ] æ‰€æœ‰å­èœå•é¡¹éƒ½èƒ½æ­£ç¡®æ˜¾ç¤º
- [ ] ç‚¹å‡»èœå•é¡¹èƒ½æ­£ç¡®å¯¼èˆªåˆ°å¯¹åº”é¡µé¢

## ç›¸å…³æ–‡ä»¶ä½ç½®

```
src/locales/
â”œâ”€â”€ zh-CN/
â”‚   â”œâ”€â”€ menu.ts          â† ä¸­æ–‡èœå•ç¿»è¯‘
â”‚   â””â”€â”€ zh-CN.ts         â† ä¸­æ–‡å…¥å£
â””â”€â”€ en-US/
    â”œâ”€â”€ menu.ts          â† è‹±æ–‡èœå•ç¿»è¯‘
    â””â”€â”€ en-US.ts         â† è‹±æ–‡å…¥å£

config/
â””â”€â”€ routes.ts            â† è·¯ç”±é…ç½®
```

## å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# å®Œæ•´é‡å»º
npm run build

# æ¸…ç©ºç¼“å­˜
rm -rf dist node_modules/.cache .umi

# é‡æ–°å®‰è£…ä¾èµ–
npm install
```
